{% assets "threejs_libs" %}
    <script type="text/javascript" src="{{ ASSET_URL }}"></script>
{% endassets %}
<div>
    <div class="row-fluid">
        <div id="workbench-controls-container" class="span2" >
            <button id="btn-move" class="btn btn-default btn-block model-selection" title=" {{ _('Move Object') }} (Alt + M)"
            data-toggle="tooltip" data-placement="right"
            onclick="BEEwb.transformOps.activateMove();" disabled="true">
                <span class="icon move"></span>
            </button>
            <div id="axis-values">
                <div id="move-axis-form" class="row-fluid form-inline">
                    <span class="workbench-title">{{ _('Object Position (mm)') }}</span>
                    <br/><br />
                    <div class="move-x">
                        <label for="x-axis">X :</label>
                        <input type="text" class="span12 axis-input-box" id="x-axis" name="x-axis" onchange="BEEwb.transformOps.move();"/>
                    </div>
                    <div class="move-y">
                        <label for="y-axis">Y :</label>
                        <input type="text" class="span12 axis-input-box" id="y-axis" name="y-axis" onchange="BEEwb.transformOps.move();"/>
                    </div>
                    <div class="move-z">
                        <label for="z-axis">Z :</label>
                        <input type="text" class="span12 axis-input-box" id="z-axis" name="z-axis" onchange="BEEwb.transformOps.move();"/>
                    </div>
                </div>
            </div>
            <button id="btn-scale" class="btn btn-default btn-block model-selection"
                data-toggle="tooltip" data-placement="right"
                title="{{ _('Scale Object') }} (Alt + S)" onclick="BEEwb.transformOps.activateScale();" disabled="true">
                <span class="icon scale"></span>
            </button>
            <div id="scale-values-form" style="display: none;">
                <span class="workbench-title">{{ _('Object Dimensions (mm)') }}</span>
                <br/><br/>
                <div id="scale-axis-form" class="row-fluid form-inline">
                    <div class="row-fluid text-center">
                        <button id="btn-scale-max" class="btn btn-sm btn-block btn-default model-selection" onclick="BEEwb.transformOps.scaleToMax();" disabled="true">
                            <span class="m-icon scalemaxicon" ></span>
                            <span>{{ _('Scale to Max') }}</span>
                        </button>
                    </div>
                    <br/>
                    <div class="row-fluid">
                         <label class="radio inline">
                            <input type="radio" id="scaleby-size" name="scaleby" value="size"
                                   checked="checked" onchange="BEEwb.transformOps.toggleScaleType();"/>
                            <label for="scaleby-size" class="workbench-controls-label">mm</label>
                        </label>
                         <label class="radio inline">
                            <input type="radio" id="scaleby-per" name="scaleby" value="percentage"
                                onchange="BEEwb.transformOps.toggleScaleType();" />
                            <label for="scaleby-per" class="workbench-controls-label">%</label>
                        </label>

                        <span id="keep-proportions-container">
                            <input type="checkbox" id="keep-proportions" title="{{ _('Keep proportions') }}" checked />
                            <label for="keep-proportions" class="workbench-controls-label">{{ _('Keep proportions') }}</label>
                        </span>
                    </div>
                    <br/>
                    <div id="size_text_fields" class="row-fluid">
                        <div class="scale-x">
                            <label for="scalex-axis" id="scalex-axis-label">X :</label>
                            <input type="text" class="span10 axis-input-box" id="scalex-axis" name="x-axis" onchange="BEEwb.transformOps.scale('x');"/>
                        </div>
                        <div class="scale-y">
                            <label for="scaley-axis" id="scaley-axis-label">Y :</label>
                            <input type="text" class="span10 axis-input-box" id="scaley-axis" name="y-axis" onchange="BEEwb.transformOps.scale('y');"/>
                        </div>
                        <div class="scale-z">
                            <label for="scalez-axis" id="scalez-axis-label">Z :</label>
                            <input type="text" class="span10 axis-input-box" id="scalez-axis" name="z-axis" onchange="BEEwb.transformOps.scale('z');"/>
                        </div>
                    </div>
                </div>
            </div>
            <button id="btn-rotate" class="btn btn-default btn-block model-selection"
                data-toggle="tooltip" data-placement="right"
                title="{{ _('Rotate Object') }} (Alt + R)" onclick="BEEwb.transformOps.activateRotate();" disabled="true">
                <span class="icon rotate"></span>
            </button>
            <hr>
            <div id="rotate-values-form" style="display: none;">
                <span class="workbench-title">{{ _('Object Rotation (deg)') }}</span>
                <br />
                <div id="rotate-axis-form" class="row-fluid form-inline">
                    <div class="row-fluid">
                        <label class="radio inline">
                            <input type="radio" id="rot-axis-selx" name="rot-axis-sel" value="x" />
                            <label for="rot-axis-selx"> X</label>
                        </label>
                        <label class="radio inline">
                            <input type="radio" id="rot-axis-sely" name="rot-axis-sel" value="y" />
                            <label for="rot-axis-sely"> Y</label>
                        </label>
                        <label class="radio inline">
                            <input type="radio" id="rot-axis-selz" name="rot-axis-sel" value="z" />
                            <label for="rot-axis-selz"> Z</label>
                        </label>
                    </div>
                    <br />
                    <div id="rotate-buttons" class="row-fluid">
                        <button id="btn-rotate-ccw" class="btn btn-sm btn-default model-selection" onclick="BEEwb.transformOps.rotateCCW();" disabled="true">
                            <span class="m-icon rotatel"></span>
                            <span>{{ _('45° Left') }}</span>
                        </button>
                        <button id="btn-rotate-cw" class="btn btn-sm btn-default model-selection" onclick="BEEwb.transformOps.rotateCW();" disabled="true">
                            <span class="m-icon rotater"></span>
                            <span>{{ _('45° Right') }}</span>
                        </button>
                    </div>

                    <br/>
                    <div class="rotate-x">
                        <label for="rotx-axis">X :</label>
                        <input type="text" class="span12 axis-input-box" id="rotx-axis" name="x-axis" value="0" onchange="BEEwb.transformOps.rotate();"/>
                    </div>
                    <div class="rotate-y">
                        <label for="roty-axis">Y :</label>
                        <input type="text" class="span12 axis-input-box" id="roty-axis" name="y-axis" value="0" onchange="BEEwb.transformOps.rotate();"/>
                    </div>
                    <div class="rotate-z">
                        <label for="rotz-axis">Z :</label>
                        <input type="text" class="span12 axis-input-box" id="rotz-axis" name="z-axis" value="0" onchange="BEEwb.transformOps.rotate();"/>
                    </div>
                </div>
            </div>
            <button class="btn btn-block model-selection" title="{{ _('Place on bed') }}" id="place_bed_selection"
                    data-toggle="tooltip" data-placement="right"
                    data-bind="" onclick="BEEwb.transformOps.placeOnBed();">
                <span class="icon placein"></span>
            </button>
            <button class="btn btn-block model-selection" title="{{ _('Center object') }}" id="center_selection"
                    data-toggle="tooltip" data-placement="right"
                    data-bind="" onclick="BEEwb.transformOps.centerModel();">
                <span class="icon centerplat"></span>
            </button>
            <button class="btn btn-block model-selection" title="{{ _('Clone object') }} (Alt + C)" id="clone_selection"
                    data-toggle="tooltip" data-placement="right"
                    data-bind="" onclick="BEEwb.transformOps.cloneSelected();">
                <span class="icon clonemod"></span>
            </button>
            <button class="btn btn-block model-selection" title="{{ _('Reset object') }}" id="reset_selection"
                    data-toggle="tooltip" data-placement="right"
                    data-bind="" onclick="BEEwb.transformOps.resetSelectedModel();">
                <span class="icon resetmod"></span>
            </button>
            <button class="btn btn-block btn-delete model-selection" title="{{ _('Delete') }}" id="delete_selection"
                    data-toggle="tooltip" data-placement="right"
                    data-bind="" onclick="BEEwb.transformOps.removeSelected();">
                <span class="icon trash"></span>
            </button>
            <hr>
            <button class="btn btn-block" title="{{ _('Save to STL') }}" id="save_scene"
                data-toggle="tooltip" data-placement="right" data-bind="click: showSaveScene">
                <i class="icon-save" style="font-size: 32px;" ></i>
            </button>
             <button class="btn btn-block" id="reset_camera"
                data-toggle="tooltip" data-placement="right" onclick="BEEwb.main.resetCamera();"
                title="{{ _('Reset camera position') }}">
                <span class="icon homenew"></span>
            </button>
            <button class="btn btn-block" title="{{ _('Clear Platform') }}" id="clean_bed"
                data-toggle="tooltip" data-placement="right" onclick="BEEwb.main.clearBed();" >
                <span class="icon clearplat"></span>
            </button>
        </div>
        <div>
            <div id="stl_container" >

                <div id="out-bound-msg" class="alert alter-warning workbench-alert text-center" style="display: none;">
                    <i class="icon-warning-sign"></i>
                    {{ _('The model is out of the printing area.') }}
                </div>
            </div>
            <div id="workbench-buttons-bottom" class="row-fluid">

            </div>
            <script>
                BEEwb.main.init();
            </script>
        </div>
    </div>

    <div id="save_scene_dialog" class="modal hide fade">
        <div class="modal-header">
            <a href="#" class="close" data-dismiss="modal">&times;</a>
            <h3>{{ _('Save to STL') }}</h3>
        </div>
        <div class="modal-body">
            <p>{{ _('Please specify the name you want for the STL file.') }}</p>
            <form class="form-horizontal" action="javascript:void(0)">
                <div class="control-group">
                    <label class="control-label">{{ _('Filename') }}</label>
                    <div class="controls">
                        <input id="sceneName" data-bind="value: sceneName, valueUpdate: 'afterkeydown'" style="width: 100%;" />
                    </div>
                </div>
            </form>
        </div>
        <div class="modal-footer">
            <a href="#" class="btn" data-dismiss="modal">{{ _('Cancel') }}</a>
            <a href="#" class="btn btn-primary" data-bind="click: function() { if ($root.enableSaveScene()) { $root.saveScene() } }, enabled: $root.enableSaveScene(), css: {disabled: $root.savingScene()}">
                <i class="icon-spinner icon-spin" data-bind="visible: savingScene"></i> {{ _('Save') }}
            </a>
        </div>
    </div>

    <div id="user_feedback_dialog" class="modal hide fade">
        <div class="modal-header">
            <h3>{{ _('Print finished') }}</h3>
        </div>
        <div class="modal-body">
            <p>{{ _('Please give us your feedback about the print...') }}</p>
            <form class="form-horizontal" action="javascript:void(0)">
                <div class="control-group">
                    <label class="control-label">{{ _('Was the print successful?') }}</label>
                    <div class="controls">
                        <div class="row-fluid">
                            <div class="span4">
                                <input id="printSuccessYes" name="printSuccess" type="radio" data-bind="value: printSuccess" value="1" checked/>
                                <label for="printSuccessYes">{{ _('Yes') }}</label>
                            </div>
                            <div class="span4">
                                <input id="printSuccessNo" name="printSuccess" type="radio" data-bind="value: printSuccess" value="0" />
                                <label for="printSuccessNo">{{ _('No') }}</label>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="control-group">
                    <label class="control-label">{{ _('How do you rate the print quality?') }}</label>
                    <div class="controls">
                        <input id="printClassification" type="number" min="1" max="10" data-bind="numeric, value: printClassification" style="width: 10%;"/><br />
                        <small>{{ _('From 1 to 10, being 10 the best quality.') }}</small>
                    </div>

                </div>
                <div class="control-group">
                    <label class="control-label">{{ _('Observations') }}</label>
                    <div class="controls">
                        <textarea id="observations" rows="4" data-bind="value: printObservations" style="width: 100%;"></textarea>
                    </div>
                </div>
            </form>
        </div>
        <div class="modal-footer">
            <a href="#" class="btn" data-bind="click: closeUserFeedbackDialog">{{ _('Cancel') }}</a>
            <a href="#" class="btn btn-primary" data-bind="click: sendUserFeedback, enabled: $root.enableSaveScene(), css: {disabled: $root.sendingFeedback()}">
                <i class="icon-spinner icon-spin" data-bind="visible: sendingFeedback"></i> {{ _('Send') }}
            </a>
        </div>
    </div>
</div>
